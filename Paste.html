<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload Bot Code to Pastebin</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #121212;
      color: #f0f0f0;
    }

    h1 {
      text-align: center;
      color: #fff;
      margin-top: 40px;
      font-size: 2.5rem;
      font-weight: 600;
    }

    .container {
      max-width: 900px;
      margin: 40px auto;
      padding: 20px;
      background-color: #1c1c1c;
      border-radius: 10px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5);
    }

    .card {
      padding: 20px;
      margin-bottom: 20px;
      background-color: #2c2c2c;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      font-size: 1.2rem;
      color: #fff;
    }

    .form-group input, .form-group select, .form-group textarea {
      padding: 10px;
      font-size: 1rem;
      margin-top: 8px;
      border-radius: 8px;
      width: 100%;
      max-width: 400px;
      border: 1px solid #333;
      background-color: #333;
      color: #fff;
    }

    .form-group button {
      padding: 10px 20px;
      background-color: #007bff;
      color: white;
      border-radius: 8px;
      font-size: 1rem;
      border: none;
      cursor: pointer;
    }

    .form-group button:hover {
      background-color: #0056b3;
    }

    .nav-buttons {
      text-align: center;
      margin-top: 30px;
    }

    .nav-buttons button {
      margin: 5px;
      padding: 10px 20px;
      background-color: #007bff;
      color: white;
      border-radius: 8px;
      font-size: 1rem;
      border: none;
      cursor: pointer;
    }

    .nav-buttons button:hover {
      background-color: #0056b3;
    }

    .hidden {
      display: none;
    }

    .visible {
      display: block;
    }

    .success {
      color: green;
    }

    .error {
      color: red;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>Upload Bot Code to Pastebin</h1>

    <!-- Navigation Buttons -->
    <div class="nav-buttons">
      <button onclick="window.history.back()">Back</button>
      <button onclick="window.location.href='index.html'">Go Home</button>
      <button onclick="window.location.href='Rent.html'">Rent Menus</button>
      <button onclick="window.location.href='Bot.html'">Rent Bot Hosting</button>
    </div>

    <!-- Login Card -->
    <div class="card" id="login-card">
      <h2>Login</h2>
      <div class="form-group">
        <label for="customerId">Customer ID: </label>
        <input type="text" id="customerId" required>
      </div>
      <div class="form-group">
        <label for="email">Email: </label>
        <input type="email" id="email" required>
      </div>
      <div class="form-group">
        <label for="discordUsername">Discord Username: </label>
        <input type="text" id="discordUsername" required>
      </div>
      <div class="form-group">
        <button onclick="login()">Login</button>
      </div>
      <div class="form-group">
        <p id="loginMessage" class="error"></p>
      </div>
    </div>

    <!-- Upload Code Card -->
    <div class="card hidden" id="upload-card">
      <h2>Upload Code</h2>
      <div class="form-group">
        <label for="title">Paste Title: </label>
        <input type="text" id="title">
      </div>
      <div class="form-group">
        <label for="code">Bot Code:</label>
        <textarea id="code" rows="10" cols="50"></textarea>
      </div>
      <div class="form-group">
        <label for="pastePrivacy">Paste Privacy:</label>
        <select id="pastePrivacy">
          <option value="0">Public</option>
          <option value="1">Unlisted</option>
        </select>
      </div>
      <div class="form-group">
        <label for="pasteExpiry">Paste Expiry:</label>
        <select id="pasteExpiry">
          <option value="10M">10 Minutes</option>
          <option value="1H">1 Hour</option>
          <option value="1D">1 Day</option>
          <option value="1W">1 Week</option>
          <option value="1M">1 Month</option>
        </select>
      </div>
      <div class="form-group">
        <button onclick="uploadCode()">Upload Code</button>
      </div>
      <div class="form-group url-field hidden">
        <label for="result">Pastebin URL:</label>
        <input type="text" id="result" readonly>
      </div>
    </div>

  </div>

  <script>
    const pastebinApiKey = 'KwCDdqs_TumdgTlvh1W5jzWhLGurn8GI'; // Your API key
    let isLoggedIn = false;

    function login() {
      const customerId = document.getElementById('customerId').value;
      const email = document.getElementById('email').value;
      const discordUsername = document.getElementById('discordUsername').value;
      const loginMessage = document.getElementById('loginMessage');

      if (!customerId || !email || !discordUsername) {
        loginMessage.textContent = 'Please fill in all fields.';
        return;
      }

      // Simulating a successful login
      isLoggedIn = true;
      loginMessage.classList.remove('error');
      loginMessage.classList.add('success');
      loginMessage.textContent = 'Logged in successfully!';
      setTimeout(() => {
        document.getElementById('login-card').classList.add('hidden');
        document.getElementById('upload-card').classList.remove('hidden');
      }, 1000);
    }

    async function uploadCode() {
      const title = document.getElementById('title').value;
      const code = document.getElementById('code').value;
      const privacy = document.getElementById('pastePrivacy').value;
      const expiry = document.getElementById('pasteExpiry').value;

      if (!code) {
        alert('Please enter code to upload.');
        return;
      }

      const pastebinData = {
        api_dev_key: pastebinApiKey,
        api_option: 'paste',
        api_paste_code: code,
        api_paste_name: title,
        api_paste_private: privacy,
        api_paste_expire_date: expiry,
        api_paste_format: 'text',
        api_user_key: ''
      };

      const formBody = Object.keys(pastebinData)
        .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(pastebinData[key])}`)
        .join('&');

      console.log(`Form Body: ${formBody}`); // Log the form body to ensure it's correctly formatted

      try {
        const response = await fetch('http://us3.bot-hosting.net:20804/proxy/pastebin', { // Change this to your server URL
          method: 'POST',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: formBody,
        });

        const data = await response.text();
        console.log(`Response Data: ${data}`); // Log the response data for debugging

        if (data.startsWith('http')) {
          document.getElementById('result').value = data;
          alert('Code uploaded successfully!');
          document.querySelector('.url-field').classList.remove('hidden'); // Show the URL field

          // Optionally, hide the upload card if you want
          // document.getElementById('upload-card').classList.add('hidden'); 

          // Send a webhook with the Pastebin URL and customer info
          const customerId = document.getElementById('customerId').value;
          const email = document.getElementById('email').value;
          const discordUsername = document.getElementById('discordUsername').value;

          sendWebhook(data, customerId, email, discordUsername);
        } else {
          alert('Failed to upload code: ' + data);
        }
      } catch (error) {
        console.error('Error uploading to Pastebin:', error);
        alert('An error occurred during the upload process.');
      }
    }

    async function sendWebhook(pastebinUrl, customerId, email, discordUsername) {
  const webhookData = {
    content: "A new Pastebin link has been uploaded!",
    embeds: [
      {
        title: "New Pastebin Upload",
        description: "A new code has been uploaded to Pastebin.",
        url: pastebinUrl,
        color: 7506394, // Hex color code for the embed
        fields: [
          {
            name: "Customer ID",
            value: customerId,
            inline: true
          },
          {
            name: "Email",
            value: email,
            inline: true
          },
          {
            name: "Discord Username",
            value: discordUsername,
            inline: true
          },
          {
            name: "Pastebin URL",
            value: pastebinUrl,
            inline: false
          }
        ],
        footer: {
          text: "Upload Bot"
        },
        timestamp: new Date().toISOString()
      }
    ]
  };

  try {
    const response = await fetch('https://discord.com/api/webhooks/1331946669474058351/_3CjdDA_jiRVEQdM606_CWh76TxwsknjmrxincQyOw8ca_QoymYNti_37ELqxO-38vRR', { 
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(webhookData),
    });

    if (!response.ok) {
      const errorDetails = await response.text();
      throw new Error(`Request failed with status ${response.status}: ${errorDetails}`);
    }

    console.log('Webhook sent successfully');
  } catch (error) {
    console.error('Error sending webhook:', error);
  }
}
  </script>

</body>
</html>
